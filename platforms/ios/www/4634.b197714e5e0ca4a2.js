"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4634],{4634:(R,m,u)=>{u.r(m),u.d(m,{EditarperfilPageModule:()=>J});var f=u(6814),g=u(95),i=u(1509),p=u(4090),d=u(5861),_=u(7110),e=u(6689),C=u(7237),b=u(2014);function v(s,r){1&s&&e._UZ(0,"ion-icon",37)}function Z(s,r){1&s&&e._UZ(0,"ion-icon",38)}function M(s,r){if(1&s){const a=e.EpF();e.TgZ(0,"ion-buttons",33)(1,"ion-button",34),e.NdJ("click",function(){e.CHM(a);const t=e.oxw();return e.KtG(t.verPaquetes(t.idUsuario))}),e.YNc(2,v,1,0,"ion-icon",35),e.YNc(3,Z,1,0,"ion-icon",36),e.qZA()()}if(2&s){const a=e.oxw();e.xp6(2),e.Q6J("ngIf","iroda"===a.compania),e.xp6(1),e.Q6J("ngIf","lua"===a.compania)}}function E(s,r){1&s&&e._UZ(0,"ion-icon",41)}function U(s,r){1&s&&e._UZ(0,"ion-icon",42)}function y(s,r){if(1&s){const a=e.EpF();e.TgZ(0,"ion-buttons",33)(1,"ion-button",34),e.NdJ("click",function(){e.CHM(a);const t=e.oxw();return e.KtG(t.eliminarFaltas(t.idUsuario,t.nombre))}),e.YNc(2,E,1,0,"ion-icon",39),e.YNc(3,U,1,0,"ion-icon",40),e.qZA()()}if(2&s){const a=e.oxw();e.xp6(2),e.Q6J("ngIf","iroda"===a.compania),e.xp6(1),e.Q6J("ngIf","lua"===a.compania)}}function T(s,r){if(1&s){const a=e.EpF();e.TgZ(0,"label",43),e.NdJ("click",function(){e.CHM(a);const t=e.oxw();return e.KtG(t.quitarFalta(t.idUsuario))}),e._uU(1),e.qZA()}if(2&s){const a=e.oxw();e.xp6(1),e.hij(" Cuenta con ",a.contadorFaltas," falta(s) ")}}function x(s,r){if(1&s&&(e.TgZ(0,"label",44),e._uU(1),e.qZA()),2&s){const a=e.oxw();e.xp6(1),e.hij(" Cuenta con ",a.totalMultas," multa(s) ")}}const P=[{path:"",component:(()=>{var s;class r{constructor(o,t,c,l,n,j,q,F){this.activatedRoute=o,this.servicio=t,this.loadingController=c,this.navCtrl=l,this.alertController=n,this.navParams=j,this.storage=q,this.alertCtrl=F,this.compania=_.if,this.ep={idUsuario:"",rol:"",usuario:"",contrasenia:"",nombre:"",sexo:"",correoElectronico:"",peso:"",altura:"--",imc:"--",telefono:"",nivel:"",estatus:"",intentos:"",clasesRestantes:""},this.submitted=!1,this.usuario=this.navParams.get(this.usuario),this.storage.get("DatosUsuario").then(h=>{this.usuario=h.respuesta,this.sociedad=h.respuesta.sociedad,this.idUser=h.respuesta.idUsuario,console.log("Datos del usuario en editarperfil:",this.usuario),console.log(this.idUser,"Id del usuario en editar perfil")})}ionViewWillEnter(){this.usuarioo=this.activatedRoute.snapshot.paramMap.get("usuario"),this.contrasenia=this.activatedRoute.snapshot.paramMap.get("contrasenia"),console.log(this.usuarioo,"Usuario"),this.servicio.getData(_.T5+"Usuarios/usuario/"+this.usuarioo).subscribe(o=>{console.log(o,"informacion del perfil seleccionado"),this.listado=o,this.respuestaUser=this.listado.respuesta[0],this.idUsuario=this.respuestaUser.idUsuario,this.idRol=this.respuestaUser.idRol,this.tipoPaquete=this.respuestaUser.tipoPaquete,this.mostrarUs="2"==this.idRol&&"Mensual"!=this.tipoPaquete,this.usuarioo=this.respuestaUser.usuario,this.sexo=this.respuestaUser.sexo,this.correoElectronico=this.respuestaUser.correoElectronico,this.nombre=this.respuestaUser.nombre,this.clasesRestantes=this.respuestaUser.clasesRestantes,this.telefono=this.respuestaUser.telefono,this.totalMultas=this.respuestaUser.totalMultas,this.contadorFaltas=this.respuestaUser.contadorFaltas})}editarUsuario(o){let t={idUsuario:this.idUsuario,idRol:this.ep.rol||this.idRol,usuario:this.ep.usuario||this.usuarioo,contrasenia:this.ep.contrasenia||this.contrasenia,nombre:this.ep.nombre||this.nombre,sexo:this.ep.sexo||this.sexo,correoElectronico:this.ep.correoElectronico||this.correoElectronico,peso:0,altura:0,imc:"--",telefono:this.ep.telefono||this.telefono,nivel:"10",estatus:this.ep.estatus||this.estatus,intentos:0,clasesRestantes:this.ep.clasesRestantes||this.clasesRestantes};this.submitted=!0,o.valid?this.servicio.editarUsuario(t).subscribe(c=>{this.mensaje=c.respuesta,200===c.codigo?(this.actualizado(),this.navCtrl.navigateRoot("/perfil")):this.actualizado()}):this.todoslosCampos(),console.log(t,"editar perfil")}activarUser(o){this.servicio.activarUser(o).subscribe(t=>{this.mensaje=t.respuesta,this.msjError=t.descripcion,200===t.codigo?(console.log(t,"Usuario Activado"),this.userActivado()):this.msjError()})}desactivarUser(o){this.servicio.desactivarUser(o).subscribe(t=>{this.mensaje=t.respuesta,this.msjError=t.descripcion,200===t.codigo?(console.log(t,"Usuario Desactivado"),this.userDesactivado()):this.msjError()})}bPago(o){this.servicio.bloquePorPago(o).subscribe(t=>{this.mensaje=t.descripcion,this.msjError=t.descripcion,200===t.codigo?(console.log(t,"Usuario desactivado por pago"),this.userDesactivado()):this.msjError()})}eliminarFaltas(o,t){console.log("Eliminar faltas",o,t),console.log("totalMultas"+this.totalMultas),this.presentAlertConfirm(o,t)}verPaquetes(o){this.navCtrl.navigateRoot("crearpaquete/"+o+"/"+this.sociedad+"/"+this.idRol),console.log(o)}actualizado(){var o=this;return(0,d.Z)(function*(){yield(yield o.alertController.create({cssClass:"my-custom-class",header:o.mensaje,buttons:["OK"]})).present()})()}errActiDesac(){var o=this;return(0,d.Z)(function*(){yield(yield o.alertController.create({cssClass:"my-custom-class",header:o.msjError,buttons:["OK"]})).present()})()}userActivado(){var o=this;return(0,d.Z)(function*(){yield(yield o.alertController.create({cssClass:"my-custom-class",header:o.mensaje,buttons:["OK"]})).present()})()}userDesactivado(){var o=this;return(0,d.Z)(function*(){yield(yield o.alertController.create({cssClass:"my-custom-class",header:o.mensaje,buttons:["OK"]})).present()})()}todoslosCampos(){var o=this;return(0,d.Z)(function*(){yield(yield o.alertController.create({cssClass:"my-custom-class",header:"Todos los campos son necesarios",buttons:["OK"]})).present()})()}userLoading(){var o=this;return(0,d.Z)(function*(){const t=yield o.loadingController.create({cssClass:"my-custom-class",spinner:"crescent",message:"Cargando",duration:1e3});yield t.present(),yield t.onDidDismiss()})()}presentAlertConfirm(o,t){var c=this;return(0,d.Z)(function*(){console.log("Seguro que se eliminaran todas las multas"),yield(yield c.alertController.create({cssClass:"my-custom-class",message:"Seguro que desea eliminar las multas de "+t,buttons:[{text:"No",role:"cancel",cssClass:"secondary",handler:n=>{}},{text:"Si",handler:()=>{console.log("Multas eliminadas"),c.faltasEliminar(o)}}]})).present()})()}quitarFalta(o){var t=this;return(0,d.Z)(function*(){console.log("Contador faltas:"+t.contadorFaltas),yield(yield t.alertController.create({cssClass:"my-custom-class",message:"Deseas agregar o eliminar una falta a "+t.nombre,buttons:[{text:"Eliminar",handler:()=>{console.log("Eliminar una falta"),t.ajustarFalta(o,"E")}},{text:"Agregar",handler:()=>{console.log("Eliminar una falta"),t.ajustarFalta(o,"I")}},{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:l=>{}}]})).present()})()}faltasEliminar(o){this.servicio.eliminarFaltas(o,this.idUser).subscribe(t=>{this.mensaje=t.descripcion,500==t.codigo?(this.deleteClase(),console.log("ID de usuario sin faltas",o),this.navCtrl.navigateRoot("/perfil")):(this.deleteClase(),this.totalMultas=t.respuesta.totalMultas)})}ajustarFalta(o,t){console.log("usuario:"+o),console.log("usuario modi:"+this.idUser);var c=0;"E"===t&&0===this.contadorFaltas&&(c=1),0===c?this.servicio.ajustarFalta(o,this.idUser,t).subscribe(l=>{this.mensaje=l.descripcion,500==l.codigo?(this.deleteClase(),console.log("ID de usuario sin faltas",o),this.navCtrl.navigateRoot("/perfil")):(this.deleteClase(),this.contadorFaltas=l.respuesta.contadorFaltas)}):(this.mensaje="No puede quitar falta ya que no cuenta con una",this.deleteClase())}deleteClase(){var o=this;return(0,d.Z)(function*(){yield(yield o.alertCtrl.create({cssClass:"my-custom-class",message:o.mensaje,buttons:["OK"]})).present()})()}deleteFaltas(){var o=this;return(0,d.Z)(function*(){yield(yield o.alertController.create({cssClass:"my-custom-class",message:o.mensaje,buttons:["OK"]})).present()})()}ngOnInit(){this.userLoading()}segmentChanged(o){console.log("Segment changed",o)}}return(s=r).\u0275fac=function(o){return new(o||s)(e.Y36(p.gz),e.Y36(C.r),e.Y36(i.HT),e.Y36(i.SH),e.Y36(i.Br),e.Y36(i.X1),e.Y36(b.K),e.Y36(i.Br))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-editarperfil"]],decls:71,vars:22,consts:[[1,"ion-no-border"],["slot","start"],["defaultHref","perfil","text","",1,"dorado"],["slot","end",4,"ngIf"],[1,"contenido",3,"fullscreen"],["novalidate",""],["editarPerfil","ngForm"],["size-md","6","size-lg","5","size-xs","12"],["color","primary","justify-content-center",""],["align-self-center","","size-md","6","size-lg","5","size-xs","12"],["padding",""],[2,"color","gray"],["multiple","false","cancelText","Cancelar","okText","Aceptar","name","rol","type","text",3,"value","ngModel","ngModelChange"],["value","1"],["value","2"],["value","3"],["position","stacked",2,"color","gray"],["name","nombre","type","text",3,"value","ngModel","ngModelChange"],["name","usuarioo","type","text",3,"value","ngModel","ngModelChange"],["name","contrasenia","type","password",3,"value","ngModel","ngModelChange"],["name","correoElectronico","type","text",3,"value","ngModel","ngModelChange"],["lines","none"],[2,"display","flex","flex-direction","column","width","100%"],[2,"color","gray","font-size","14px","margin-top","16px","margin-bottom","5px"],["name","sexo","type","text",3,"value","ngModel","ionChange","ngModelChange"],["value","F"],["value","M"],["name","telefono","type","tel",3,"value","ngModel","ngModelChange"],[3,"hidden"],["name","clasesRestantes","type","text",3,"value","ngModel","ngModelChange"],["class","faltas",3,"click",4,"ngIf"],["class","multas",4,"ngIf"],["type","submit","size","large","expand","block",1,"btndorado",3,"click"],["slot","end"],[3,"click"],["class","dorado","name","book-outline",4,"ngIf"],["class","dorado icon-24","slot","icon-only","name","memberships",4,"ngIf"],["name","book-outline",1,"dorado"],["slot","icon-only","name","memberships",1,"dorado","icon-24"],["color","danger","name","notifications-off-outline",4,"ngIf"],["class","rojo icon-20","slot","icon-only","name","not-notf",4,"ngIf"],["color","danger","name","notifications-off-outline"],["slot","icon-only","name","not-notf",1,"rojo","icon-20"],[1,"faltas",3,"click"],[1,"multas"]],template:function(o,t){if(1&o){const c=e.EpF();e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Editar perfil"),e.qZA(),e.TgZ(4,"ion-buttons",1),e._UZ(5,"ion-back-button",2),e.qZA(),e.YNc(6,M,4,2,"ion-buttons",3),e.YNc(7,y,4,2,"ion-buttons",3),e.qZA()(),e.TgZ(8,"ion-content",4)(9,"form",5,6)(11,"ion-grid",7)(12,"ion-row",8)(13,"ion-col",9)(14,"div",10)(15,"ion-item")(16,"ion-label",11),e._uU(17,"Tipo"),e.qZA(),e.TgZ(18,"ion-select",12),e.NdJ("ngModelChange",function(n){return t.ep.rol=n}),e.TgZ(19,"ion-select-option",13),e._uU(20,"Administrador"),e.qZA(),e.TgZ(21,"ion-select-option",14),e._uU(22,"Usuario"),e.qZA(),e.TgZ(23,"ion-select-option",15),e._uU(24,"Entrenador"),e.qZA()()(),e.TgZ(25,"ion-item")(26,"ion-label",16),e._uU(27,"Nombre"),e.qZA(),e.TgZ(28,"ion-input",17),e.NdJ("ngModelChange",function(n){return t.ep.nombre=n}),e.qZA()(),e.TgZ(29,"ion-item")(30,"ion-label",16),e._uU(31,"Usuario"),e.qZA(),e.TgZ(32,"ion-input",18),e.NdJ("ngModelChange",function(n){return t.ep.usuario=n}),e.qZA()(),e.TgZ(33,"ion-item")(34,"ion-label",16),e._uU(35,"Contrase\xf1a"),e.qZA(),e.TgZ(36,"ion-input",19),e.NdJ("ngModelChange",function(n){return t.ep.contrasenia=n}),e.qZA()(),e.TgZ(37,"ion-item")(38,"ion-label",16),e._uU(39,"Correo electr\xf3nico"),e.qZA(),e.TgZ(40,"ion-input",20),e.NdJ("ngModelChange",function(n){return t.ep.correoElectronico=n}),e.qZA()(),e.TgZ(41,"ion-item",21)(42,"div",22)(43,"ion-label",23),e._uU(44,"Estatus"),e.qZA(),e.TgZ(45,"div")(46,"ion-segment",24),e.NdJ("ionChange",function(n){return t.segmentChanged(n)})("ngModelChange",function(n){return t.ep.sexo=n}),e.TgZ(47,"ion-segment-button",25)(48,"ion-label"),e._uU(49,"Femenino"),e.qZA()(),e.TgZ(50,"ion-segment-button",26)(51,"ion-label"),e._uU(52,"Masculino"),e.qZA()()()()()(),e.TgZ(53,"ion-item")(54,"ion-label",16),e._uU(55,"Telefono"),e.qZA(),e.TgZ(56,"ion-input",27),e.NdJ("ngModelChange",function(n){return t.ep.telefono=n}),e.qZA()(),e.TgZ(57,"div")(58,"ion-item",28)(59,"ion-label",16),e._uU(60,"Clases restantes"),e.qZA(),e.TgZ(61,"ion-input",29),e.NdJ("ngModelChange",function(n){return t.ep.clasesRestantes=n}),e.qZA()()(),e._UZ(62,"br"),e.YNc(63,T,2,1,"label",30),e.YNc(64,x,2,1,"label",31),e.qZA(),e._UZ(65,"br"),e.TgZ(66,"div")(67,"ion-row")(68,"ion-col")(69,"ion-button",32),e.NdJ("click",function(){e.CHM(c);const n=e.MAs(10);return e.KtG(t.editarUsuario(n))}),e._uU(70,"Editar "),e.qZA()()()()()()()()()}2&o&&(e.xp6(6),e.Q6J("ngIf",2==t.idRol),e.xp6(1),e.Q6J("ngIf",t.totalMultas>0),e.xp6(1),e.Q6J("fullscreen",!0),e.xp6(10),e.s9C("value",t.idRol),e.Q6J("ngModel",t.ep.rol),e.xp6(10),e.s9C("value",t.nombre),e.Q6J("ngModel",t.ep.nombre),e.xp6(4),e.s9C("value",t.usuarioo),e.Q6J("ngModel",t.ep.usuario),e.xp6(4),e.s9C("value",t.contrasenia),e.Q6J("ngModel",t.ep.contrasenia),e.xp6(4),e.s9C("value",t.correoElectronico),e.Q6J("ngModel",t.ep.correoElectronico),e.xp6(6),e.s9C("value",t.sexo),e.Q6J("ngModel",t.ep.sexo),e.xp6(10),e.s9C("value",t.telefono),e.Q6J("ngModel",t.ep.telefono),e.xp6(2),e.Q6J("hidden",!t.mostrarUs),e.xp6(3),e.s9C("value",t.clasesRestantes),e.Q6J("ngModel",t.ep.clasesRestantes),e.xp6(2),e.Q6J("ngIf",2==t.idRol),e.xp6(1),e.Q6J("ngIf",2==t.idRol))},dependencies:[f.O5,g._Y,g.JJ,g.JL,g.On,g.F,i.oU,i.YG,i.Sm,i.wI,i.W2,i.jY,i.Gu,i.gu,i.pK,i.Ie,i.Q$,i.Nd,i.cJ,i.GO,i.t9,i.n0,i.wd,i.sr,i.QI,i.j9,i.cs],styles:["ion-col[_ngcontent-%COMP%]{display:block;margin:auto}.sexo[_ngcontent-%COMP%]{font-size:15px;font-weight:400;color:#000}.multas[_ngcontent-%COMP%]{margin-left:5px;background-color:#ffced4;padding:2px 10px;color:#d0011b;border-radius:15px;font-size:10px}.faltas[_ngcontent-%COMP%]{margin-left:5px;background-color:#f6f7ca;padding:2px 10px;color:#a7aa18;border-radius:15px;font-size:10px}"]}),r})()}];let A=(()=>{var s;class r{}return(s=r).\u0275fac=function(o){return new(o||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[p.Bz.forChild(P),p.Bz]}),r})(),J=(()=>{var s;class r{}return(s=r).\u0275fac=function(o){return new(o||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[f.ez,g.u5,i.Pc,A]}),r})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8764],{8764:(U,p,n)=>{n.r(p),n.d(p,{AsisalumnoPageModule:()=>y});var A=n(6814),d=n(95),i=n(1509),m=n(4090),h=n(5861),f=n(7110),e=n(6689),v=n(7237),C=n(2014);function b(o,r){1&o&&(e.TgZ(0,"ion-col")(1,"h2"),e._uU(2,"Clase Llena"),e.qZA()())}const M=[{path:"",component:(()=>{var o;class r{constructor(a,s,t,l,g,c){this.servicio=a,this.activatedRoute=s,this.alertController=t,this.loadingController=l,this.storage=g,this.navParams=c,this.logo=f.us,this.fechaClase=new Date,this.fa={fecha:""},this.usuario=this.navParams.get(this.usuario),this.storage.get("DatosUsuario").then(P=>{this.usuario=P,console.log("El usuario en ASISTENCIA ALUMNO es :",this.usuario.respuesta.nombre),console.log("Y su Rol es :",this.usuario.respuesta.idRol),console.log("El ID del usuario es  :",this.usuario.respuesta.idUsuario),this.numeroUsuario=this.usuario.respuesta.idUsuario,console.log("La fecha es :",this.fechaDeClase)})}ionViewWillEnter(){this.idUsuario=this.activatedRoute.snapshot.paramMap.get("idUsuario"),this.usuario=this.activatedRoute.snapshot.paramMap.get("usuario"),this.servicio.getData(f.T5+"Usuarios/usuario/"+this.usuario+"/").subscribe(a=>{console.log(a),this.listado=a})}asistir(a,s){if(console.log("fecha in:"+this.fecha),void 0===this.fecha){console.log("entro");var t=new Date,l=String(t.getDate()).padStart(2,"0"),g=String(t.getMonth()+1).padStart(2,"0"),c=t.getFullYear();this.fecha=c+"-"+g+"-"+l}console.log("fecha f:"+this.fecha),console.log("Fecha seleccionada",this.fecha)}quitarAsistencia(a){if(console.log("fecha in:"+this.fecha),void 0===this.fecha){console.log("entro");var s=new Date,t=String(s.getDate()).padStart(2,"0"),l=String(s.getMonth()+1).padStart(2,"0"),g=s.getFullYear();this.fecha=g+"-"+l+"-"+t}console.log("fecha f:"+this.fecha),this.servicio.eliminarAlumno(this.numeroUsuario,this.idClase,this.fecha).subscribe(c=>{console.log(c,"Asistencia eliminada"),this.mensaje=c.respuesta,200==c.codigo?(this.eliminarAsistencia(),console.log("Fecha seleccionada",this.fecha)):this.eliminarAsistencia()})}agregadoAlert(){var a=this;return(0,h.Z)(function*(){yield(yield a.alertController.create({cssClass:"my-custom-class",message:a.mensaje,buttons:["OK"]})).present()})()}usuarioEnclase(){var a=this;return(0,h.Z)(function*(){yield(yield a.alertController.create({cssClass:"my-custom-class",message:a.mensajeerror,buttons:["OK"]})).present()})()}eliminarAsistencia(){var a=this;return(0,h.Z)(function*(){yield(yield a.alertController.create({cssClass:"my-custom-class",message:a.mensaje,buttons:["OK"]})).present()})()}activandoLoading(){var a=this;return(0,h.Z)(function*(){const s=yield a.loadingController.create({cssClass:"my-custom-class",spinner:"crescent",message:a.mensaje,duration:1e3});yield s.present(),yield s.onDidDismiss()})()}asistenciaEliminada(){var a=this;return(0,h.Z)(function*(){const s=yield a.loadingController.create({cssClass:"my-custom-class",spinner:"crescent",message:a.mensaje,duration:1e3});yield s.present(),yield s.onDidDismiss()})()}ngOnInit(){this.idClase=this.activatedRoute.snapshot.paramMap.get("idClase"),this.nombre=this.activatedRoute.snapshot.paramMap.get("nombre"),this.profesor=this.activatedRoute.snapshot.paramMap.get("profesor"),console.log("El ID de la clase es :",this.idClase),this.servicio.getData(f.T5+"AsistenciaClases/"+this.idClase+"/").subscribe(a=>{console.log(a,"ngOnInit"),this.listado=a;let s=JSON.stringify(a),t=JSON.parse(s);this.fechaDeClase=t.respuesta.fecha,console.log("Fecha de la clase",this.fechaDeClase)})}cambiofecha(a){this.fecha=this.fa.fecha.substring(0,10),this.servicio.getData("AsistenciaClases/"+this.idClase+"?fecha="+this.fecha).subscribe(s=>{console.log(s,"cambioFecha"),this.listado=s}),console.log(event,"evento"),console.log(this.fecha,"fecha seleccionada"),console.log("La fecha seleccionada por el alumno es:",this.fechaDeClase)}}return(o=r).\u0275fac=function(a){return new(a||o)(e.Y36(v.r),e.Y36(m.gz),e.Y36(i.Br),e.Y36(i.HT),e.Y36(C.K),e.Y36(i.X1))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-asisalumno"]],decls:31,vars:8,consts:[[1,"ion-no-border"],["slot","start"],["defaultHref","clasesalumnos","text",""],[3,"fullscreen"],[1,"logo",3,"src"],["inset","true","lines","none"],["name","fecha","displayFormat","YYYY-MM-DD","min","2020-07-04","max","2020-12-31","cancelText","Cancelar","doneText","Aceptar","monthShortNames","Enero, Febrero, Marzo, Abril, Mayo, Junio, Julio, Agosto, Septiembre, Octubre, Noviembre, Diciembre",3,"ngModel","value","ngModelChange","ionChange"],["color","success","expand","block",3,"click"],["color","danger","expand","block",3,"click"],[4,"ngIf"]],template:function(a,s){1&a&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA()()(),e.TgZ(4,"ion-content",3),e._UZ(5,"ion-img",4),e.TgZ(6,"ion-list",5)(7,"ion-item")(8,"ion-label")(9,"h2"),e._uU(10),e.qZA(),e.TgZ(11,"h3"),e._uU(12),e.qZA(),e.TgZ(13,"p"),e._uU(14),e.qZA()()(),e.TgZ(15,"ion-item")(16,"ion-list-header")(17,"ion-item")(18,"ion-label"),e._uU(19,"Fecha"),e.qZA(),e.TgZ(20,"ion-datetime",6),e.NdJ("ngModelChange",function(l){return s.fa.fecha=l})("ionChange",function(l){return s.cambiofecha(l)}),e._uU(21," >"),e.qZA()()()(),e.TgZ(22,"ion-grid")(23,"ion-row")(24,"ion-col")(25,"ion-button",7),e.NdJ("click",function(){return s.asistir(s.idUsuario,s.fa.fecha)}),e._uU(26,"Apartar lugar"),e.qZA()(),e.TgZ(27,"ion-col")(28,"ion-button",8),e.NdJ("click",function(){return s.quitarAsistencia(s.idUsuario)}),e._uU(29,"Elminar Asistencia "),e.qZA()(),e.YNc(30,b,3,0,"ion-col",9),e.qZA()()()()),2&a&&(e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(1),e.MGl("src","../../assets/img/",s.logo,""),e.xp6(5),e.hij(" Clase: ",s.nombre," "),e.xp6(2),e.hij(" Profesor: ",s.profesor," "),e.xp6(2),e.hij(" ",null==s.listado?null:s.listado.respuesta.lugares," "),e.xp6(6),e.s9C("value",s.fechaDeClase),e.Q6J("ngModel",s.fa.fecha),e.xp6(10),e.Q6J("ngIf",0===(null==s.listado?null:s.listado.respuesta.lugares)))},dependencies:[A.O5,d.JJ,d.On,i.oU,i.YG,i.Sm,i.wI,i.W2,i.x4,i.jY,i.Gu,i.Xz,i.Ie,i.Q$,i.q_,i.yh,i.Nd,i.sr,i.QI,i.cs],styles:["h2[_ngcontent-%COMP%]{font-size:25px;text-align:center;padding:3px}h3[_ngcontent-%COMP%]{text-align:center;padding:3px}p[_ngcontent-%COMP%]{font-size:15px;text-align:center}ion-title[_ngcontent-%COMP%]{font-size:23px;text-align:center}ion-img[_ngcontent-%COMP%]{width:30%;display:block;margin:auto}"]}),r})()}];let Z=(()=>{var o;class r{}return(o=r).\u0275fac=function(a){return new(a||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.Bz.forChild(M),m.Bz]}),r})(),y=(()=>{var o;class r{}return(o=r).\u0275fac=function(a){return new(a||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[A.ez,d.u5,i.Pc,Z]}),r})()}}]);
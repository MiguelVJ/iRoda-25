"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[182],{182:(U,d,t)=>{t.r(d),t.d(d,{CambiarpassPageModule:()=>T});var p=t(6814),c=t(95),n=t(1509),h=t(4090),m=t(5861),b=t(7110),a=t(6689),f=t(7237),v=t(2014);function y(e,r){1&e&&a._UZ(0,"ion-img",17)}function Z(e,r){1&e&&a._UZ(0,"ion-img",18)}const P=[{path:"",component:(()=>{var e;class r{constructor(o,s,i,u,l,A){this.servicio=o,this.storage=s,this.toastController=i,this.alertController=u,this.navCtrl=l,this.loadingController=A,this.cp={idUsuario:"",contraseniaAnterior:"",contraseniaNueva:"",confirmarpass:""},this.compania=b.if,this.submitted=!1,console.log("entro al constructor"),this.storage.get("DatosUsuario").then(C=>{this.usuario=C,console.log("user :",C),console.log("El usuario en USER es :",this.usuario.respuesta.nombre),console.log("El ID del usuario es  :",this.usuario.respuesta.idUsuario),console.log("El Rol del usuario es : ",this.usuario.respuesta.idRol),console.log("El estatus del usuario es:",this.usuario.respuesta.estatus),this.numeroUsuario=this.usuario.respuesta.idUsuario,this.bloqueado(this.numeroUsuario)})}ngOnInit(){this.cambioloading()}atras(){this.navCtrl.navigateRoot("/user")}passNuevo(o){let s={idUsuario:this.numeroUsuario,contraseniaAnterior:this.cp.contraseniaAnterior,contraseniaNueva:this.cp.contraseniaNueva};this.submitted=!0,this.cp.contraseniaNueva===this.cp.confirmarpass?this.servicio.cambiarPass(s).subscribe(i=>{console.log(i,"Password cambiado"),this.mensaje=i.respuesta,this.mensajerr=i.descripcion,200==i.codigo?(this.cambiopassLoading(),this.storage.clear(),this.navCtrl.navigateRoot("/login")):(this.erroPass(),this.clearForm())}):(this.passIncorrecto(),this.clearForm())}passIncorrecto(){var o=this;return(0,m.Z)(function*(){(yield o.toastController.create({message:"Las contrase\xf1as no coinciden.",duration:1e3})).present()})()}erroPass(){var o=this;return(0,m.Z)(function*(){yield(yield o.alertController.create({cssClass:"my-custom-class",message:o.mensajerr,buttons:["OK"]})).present()})()}cambiopassLoading(){var o=this;return(0,m.Z)(function*(){const s=yield o.loadingController.create({cssClass:"my-custom-class",spinner:"crescent",message:o.mensaje,duration:700});yield s.present(),yield s.onDidDismiss()})()}clearForm(){this.cp.contraseniaAnterior="",this.cp.contraseniaNueva="",this.cp.confirmarpass=""}cambioloading(){var o=this;return(0,m.Z)(function*(){const s=yield o.loadingController.create({cssClass:"my-custom-class",spinner:"crescent",message:"Cargando",duration:700});yield s.present(),yield s.onDidDismiss()})()}bloqueado(o){this.servicio.getData(b.T5+"Usuarios/bloqueo-por-pago/"+o).subscribe(s=>{this.usuario=s,console.log(s),500===this.usuario.codigo&&(this.storage.clear(),this.navCtrl.navigateRoot("/login"),this.msjBloqueado(this.usuario.descripcion))})}msjBloqueado(o){var s=this;return(0,m.Z)(function*(){yield(yield s.alertController.create({cssClass:"my-custom-class",header:o,buttons:["OK"]})).present()})()}}return(e=r).\u0275fac=function(o){return new(o||e)(a.Y36(f.r),a.Y36(v.K),a.Y36(n.yF),a.Y36(n.Br),a.Y36(n.SH),a.Y36(n.HT))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-cambiarpass"]],decls:35,vars:6,consts:[[1,"ion-no-border"],[1,"dorado"],["slot","start"],["defaultHref","","text","",1,"dorado",3,"click"],[1,"contenido",3,"fullscreen"],["novalidate",""],["cambiarPass","ngForm"],["size-md","6","size-lg","5","size-xs","12"],["padding",""],[2,"text-align","center"],["style","margin-bottom: 15px;","src","assets/img/reset-password.png",4,"ngIf"],["style","margin-bottom: 15px;","src","assets/img/pr1.png",4,"ngIf"],["position","floating",2,"color","gray"],["name","contraseniaAnterior","type","password","required","",3,"ngModel","ngModelChange"],["name","contrasenia","type","password","maxlength","11","required","",3,"ngModel","ngModelChange"],["name","contraseniaNueva","type","password","maxlength","11","required","",3,"ngModel","ngModelChange"],["size","large","type","submit","expand","block",1,"btndorado",3,"click"],["src","assets/img/reset-password.png",2,"margin-bottom","15px"],["src","assets/img/pr1.png",2,"margin-bottom","15px"]],template:function(o,s){if(1&o){const i=a.EpF();a.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),a._uU(3,"Cambiar contrase\xf1a"),a.qZA(),a.TgZ(4,"ion-buttons",2)(5,"ion-back-button",3),a.NdJ("click",function(){return s.atras()}),a.qZA()()()(),a.TgZ(6,"ion-content",4)(7,"form",5,6)(9,"ion-grid")(10,"ion-row")(11,"ion-col",7)(12,"div",8)(13,"div",9),a.YNc(14,y,1,0,"ion-img",10),a.YNc(15,Z,1,0,"ion-img",11),a.TgZ(16,"label"),a._uU(17,"Ingresa los datos para poder resetear tu contrase\xf1a"),a.qZA()(),a.TgZ(18,"ion-item")(19,"ion-label",12),a._uU(20," Contrase\xf1a anterior"),a.qZA(),a.TgZ(21,"ion-input",13),a.NdJ("ngModelChange",function(l){return s.cp.contraseniaAnterior=l}),a.qZA()(),a.TgZ(22,"ion-item")(23,"ion-label",12),a._uU(24," Contrase\xf1a nueva"),a.qZA(),a.TgZ(25,"ion-input",14),a.NdJ("ngModelChange",function(l){return s.cp.contraseniaNueva=l}),a.qZA()(),a.TgZ(26,"ion-item")(27,"ion-label",12),a._uU(28," Confirmar contrase\xf1a"),a.qZA(),a.TgZ(29,"ion-input",15),a.NdJ("ngModelChange",function(l){return s.cp.confirmarpass=l}),a.qZA()()(),a._UZ(30,"br")(31,"br"),a.TgZ(32,"div")(33,"ion-button",16),a.NdJ("click",function(){a.CHM(i);const l=a.MAs(8);return a.KtG(s.passNuevo(l))}),a._uU(34,"Cambiar"),a.qZA()()()()()()()}2&o&&(a.xp6(6),a.Q6J("fullscreen",!0),a.xp6(8),a.Q6J("ngIf","iroda"===s.compania),a.xp6(1),a.Q6J("ngIf","lua"===s.compania),a.xp6(6),a.Q6J("ngModel",s.cp.contraseniaAnterior),a.xp6(4),a.Q6J("ngModel",s.cp.contraseniaNueva),a.xp6(4),a.Q6J("ngModel",s.cp.confirmarpass))},dependencies:[p.O5,c._Y,c.JJ,c.JL,c.Q7,c.nD,c.On,c.F,n.oU,n.YG,n.Sm,n.wI,n.W2,n.jY,n.Gu,n.Xz,n.pK,n.Ie,n.Q$,n.Nd,n.wd,n.sr,n.j9,n.cs],styles:["ion-content[_ngcontent-%COMP%]{--overflow: hidden}ion-img[_ngcontent-%COMP%]{width:45%;display:block;margin:auto}ion-col[_ngcontent-%COMP%]{display:block;margin:auto}"]}),r})()}];let M=(()=>{var e;class r{}return(e=r).\u0275fac=function(o){return new(o||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[h.Bz.forChild(P),h.Bz]}),r})(),T=(()=>{var e;class r{}return(e=r).\u0275fac=function(o){return new(o||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[p.ez,c.u5,n.Pc,M]}),r})()}}]);
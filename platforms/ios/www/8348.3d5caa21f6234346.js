"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8348],{8348:(L,p,a)=>{a.r(p),a.d(p,{LoginPageModule:()=>x});var m=a(6814),g=a(95),s=a(1509),f=a(4090),u=a(5861),h=a(7110),o=a(6689),v=a(7237),C=a(2014);function M(e,r){if(1&e&&o._UZ(0,"ion-img",14),2&e){const l=o.oxw();o.MGl("src","../../assets/img/",l.logo,"")}}function b(e,r){if(1&e&&o._UZ(0,"ion-img",14),2&e){const l=o.oxw();o.MGl("src","../../assets/img/",l.logoBlanco,"")}}const P=[{path:"",component:(()=>{var e;class r{constructor(t,n,i,c,d){this.servicio=t,this.loadingController=n,this.storage=i,this.navCtrl=c,this.alertController=d,this.login={usuario:"",contrasenia:""},this.compania=h.if,this.logo=h.us,this.logoBlanco=h.v7,this.fondo=h.BY,this.submitted=!1}onLogin(t){let n={usuario:this.login.usuario,contrasenia:this.login.contrasenia};this.submitted=!0,t.valid?(console.log(this.storage,"Storage onLogin"),this.servicio.loginPost(n).subscribe(i=>{let c=i;this.storage.set("DatosUsuario",c),console.log("json",c),this.codigo=i.codigo,console.log(i,"Login nuevo method"),200==i.codigo?(this.mensaje=i.mensaje,this.Rol=i.respuesta.idRol,this.usuario=i.respuesta.usuario,this.terminos=i.respuesta.terminos,this.presentLoading(),1===this.Rol?(console.log(this.login.usuario),console.log("Usuario Administrador"),this.navCtrl.navigateRoot("/admin")):2===this.Rol?(console.log(this.login.usuario),console.log("Usuario Cliente"),this.navCtrl.navigateRoot("aceptados"===this.terminos?"/admin":"/terminos"),this.clearForm()):3===this.Rol&&(console.log(this.login.usuario),console.log("Usuario Entrenador"),this.navCtrl.navigateRoot("/admin"),this.clearForm()),null===this.Rol&&(console.log("Usuario no registrado"),this.clearForm())):500===i.codigo&&(this.errorLogin(i.descripcion),console.log("Error 500"))}),console.log(this.login)):this.todoslosCampos()}errorLogin(t){var n=this;return(0,u.Z)(function*(){yield(yield n.alertController.create({cssClass:"my-custom-class",header:t,buttons:["OK"]})).present()})()}todoslosCampos(){var t=this;return(0,u.Z)(function*(){yield(yield t.alertController.create({cssClass:"my-custom-class",header:"Todos los campos son necesarios",buttons:["OK"]})).present()})()}presentLoading(){var t=this;return(0,u.Z)(function*(){const n=yield t.loadingController.create({cssClass:"my-custom-class",spinner:"crescent",translucent:!0,message:"Bienvenido "+t.usuario,duration:1e3});yield n.present(),yield n.onDidDismiss()})()}Loadingdatosinc(t){var n=this;return(0,u.Z)(function*(){yield(yield n.alertController.create({cssClass:"my-custom-class",message:t,buttons:["OK"]})).present()})()}clearForm(){this.login.contrasenia="",this.login.usuario=""}showAlert(t){var n=this;return(0,u.Z)(function*(){(yield n.alertController.create({header:"Alerta",subHeader:t,buttons:["Aceptar"]})).present()})()}userDesactivado(){var t=this;return(0,u.Z)(function*(){yield(yield t.alertController.create({cssClass:"my-custom-class",header:"Atencion !",message:"Usuario desactivado, contactate con el administrador.",buttons:["OK"]})).present()})()}ngOnInit(){console.log("Se inicio la App"),this.storage.get("DatosUsuario").then(t=>{this.usuario=t,console.log("user :",t),null!==t&&(1===this.usuario.respuesta.idRol&&(console.log("Usuario Administrador"),this.navCtrl.navigateRoot("/admin")),2===this.usuario.respuesta.idRol?(console.log("Usuario Entrenador"),this.navCtrl.navigateRoot("aceptados"===this.usuario.respuesta.terminos?"/admin":"/terminos")):2===this.usuario.respuesta.idRol&&(console.log("Usuario Cliente"),this.bloqueado(this.usuario.respuesta.idUsuario)))})}recuperar(){this.navCtrl.navigateRoot("/recuperar")}bloqueado(t){this.servicio.getData(h.T5+"Usuarios/bloqueo-por-pago/"+t).subscribe(n=>{this.usuario=n,console.log(n),500===this.usuario.codigo?(this.storage.clear(),this.navCtrl.navigateRoot("/login"),this.msjBloqueado(this.usuario.descripcion)):this.servicio.getUsuario(t).subscribe(i=>{this.terminos=i.respuesta[0].terminos,this.navCtrl.navigateRoot("aceptados"===this.terminos?"/admin":"/terminos")})})}msjBloqueado(t){var n=this;return(0,u.Z)(function*(){yield(yield n.alertController.create({cssClass:"my-custom-class",header:"Atencion !",message:t,buttons:["OK"]})).present()})()}}return(e=r).\u0275fac=function(t){return new(t||e)(o.Y36(v.r),o.Y36(s.HT),o.Y36(C.K),o.Y36(s.SH),o.Y36(s.Br))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-login"]],decls:20,vars:5,consts:[[1,"ion-no-border"],["padding","",1,"background",3,"fullscreen"],["novalidate",""],["loginForm","ngForm"],[3,"src",4,"ngIf"],[2,"width","90%","margin","auto"],["placeholder","Usuario","type","text","name","usuario","spellcheck","false","autocapitalize","on","required","",2,"margin-bottom","10px","margin-top","30px","padding","5px",3,"ngModel","ngModelChange"],["usuario","ngModel"],["placeholder","Contrase\xf1a","type","password","name","contrasenia","type","password","required","",2,"margin-bottom","10px",3,"ngModel","ngModelChange"],["contrasenia","ngModel"],["size","large","expand","block",1,"btndorado",2,"margin-bottom","20px",3,"click"],["size","large","expand","block","fill","clear",1,"dorado",3,"click"],[1,"ion-no-border","footer"],[2,"color","white","font-size","10px"],[3,"src"]],template:function(t,n){if(1&t){const i=o.EpF();o.TgZ(0,"ion-header",0),o._UZ(1,"ion-toolbar"),o.qZA(),o.TgZ(2,"ion-content",1)(3,"form",2,3),o.YNc(5,M,1,1,"ion-img",4),o.YNc(6,b,1,1,"ion-img",4),o.TgZ(7,"div",5)(8,"ion-input",6,7),o.NdJ("ngModelChange",function(d){return n.login.usuario=d}),o.qZA(),o.TgZ(10,"ion-input",8,9),o.NdJ("ngModelChange",function(d){return n.login.contrasenia=d}),o.qZA(),o.TgZ(12,"ion-button",10),o.NdJ("click",function(){o.CHM(i);const d=o.MAs(4);return o.KtG(n.onLogin(d))}),o._uU(13," Iniciar Sesi\xf3n "),o.qZA(),o.TgZ(14,"ion-button",11),o.NdJ("click",function(){return n.recuperar()}),o._uU(15," Recuperar contrase\xf1a "),o.qZA()()()(),o.TgZ(16,"ion-footer",12)(17,"ion-toolbar")(18,"ion-label",13),o._uU(19,"V1.0"),o.qZA()()()}2&t&&(o.xp6(2),o.Q6J("fullscreen",!0),o.xp6(3),o.Q6J("ngIf","iroda"==n.compania),o.xp6(1),o.Q6J("ngIf","lua"==n.compania),o.xp6(2),o.Q6J("ngModel",n.login.usuario),o.xp6(2),o.Q6J("ngModel",n.login.contrasenia))},dependencies:[m.O5,g._Y,g.JJ,g.JL,g.Q7,g.On,g.F,s.YG,s.W2,s.fr,s.Gu,s.Xz,s.pK,s.Q$,s.sr,s.j9],styles:["div[_ngcontent-%COMP%]{margin-top:45px}ion-content[_ngcontent-%COMP%]{--background: var(--login-background, url(/assets/img/LUAstudioPhoto.png)) no-repeat center/cover fixed;--background-repeat: no-repeat;--background-attachment: fixed !important}ion-input[_ngcontent-%COMP%]{height:40px!important;--min-height: 0;padding:0!important;background-color:#d9d8d8;--padding-start: 8px;--padding-end: 20px}ion-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:16px!important;min-height:0!important;padding:var(--padding-start);padding:var(--padding-end)}ion-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder{color:#181818}.labeldorado[_ngcontent-%COMP%]{color:#efb810;height:35px;font-size:16px;margin-top:5px}ion-title[_ngcontent-%COMP%]{font-size:18px;text-align:center}ion-img[_ngcontent-%COMP%]{width:70%;display:block;margin:auto;padding-top:40px}a[_ngcontent-%COMP%]{color:#fff;text-align:center}ion-col[_ngcontent-%COMP%]{display:block;margin:auto}ion-content[_ngcontent-%COMP%]{--overflow: hidden}ion-text.p[_ngcontent-%COMP%]{color:#f80303}ion-toolbar[_ngcontent-%COMP%]{--background: transparent;--ion-color-base: transparent !important}.centrado[_ngcontent-%COMP%]{text-align:center}.footer[_ngcontent-%COMP%]{min-height:5em;height:auto;font-size:18px;text-align:center}"]}),r})()}];let y=(()=>{var e;class r{}return(e=r).\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[f.Bz.forChild(P),f.Bz]}),r})(),x=(()=>{var e;class r{}return(e=r).\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[m.ez,g.u5,s.Pc,y]}),r})()}}]);
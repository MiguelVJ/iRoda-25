"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3091],{3091:(F,m,c)=>{c.r(m),c.d(m,{AsistentesPageModule:()=>T});var u=c(6814),b=c(95),l=c(1509),h=c(4090),d=c(5861),p=c(7110),e=c(6689),x=c(7237),_=c(2014);function A(s,r){if(1&s&&(e.TgZ(0,"label",21),e._uU(1),e.qZA()),2&s){const o=e.oxw(2).$implicit;e.xp6(1),e.Oqu(o.asistio)}}function C(s,r){if(1&s&&(e.TgZ(0,"div")(1,"label",17),e._uU(2),e.qZA(),e.TgZ(3,"label",18),e._uU(4),e.qZA(),e.TgZ(5,"label",19),e._uU(6),e.qZA(),e.YNc(7,A,2,1,"label",20),e.qZA()),2&s){const o=e.oxw().$implicit;e.xp6(2),e.Oqu(o.iniciales),e.xp6(2),e.hij(" ",o.nombre," "),e.xp6(2),e.hij("L",o.lugar,""),e.xp6(1),e.Q6J("ngIf","F"==o.asistio)}}function Z(s,r){if(1&s&&(e.TgZ(0,"label",21),e._uU(1),e.qZA()),2&s){const o=e.oxw(2).$implicit;e.xp6(1),e.Oqu(o.asistio)}}function v(s,r){if(1&s&&(e.TgZ(0,"div")(1,"label",22),e._uU(2),e.qZA(),e.TgZ(3,"label",18),e._uU(4),e.qZA(),e.TgZ(5,"label",19),e._uU(6),e.qZA(),e.YNc(7,Z,2,1,"label",20),e.qZA()),2&s){const o=e.oxw().$implicit;e.xp6(2),e.Oqu(o.iniciales),e.xp6(2),e.hij(" ",o.nombre," "),e.xp6(2),e.hij("L",o.lugar,""),e.xp6(1),e.Q6J("ngIf","F"==o.asistio)}}function P(s,r){if(1&s){const o=e.EpF();e.TgZ(0,"ion-item",14),e.NdJ("click",function(){const a=e.CHM(o).$implicit,n=e.oxw();return e.KtG(n.ponerFalta(a.idUsuario,a.nombre,a.lugar,a.asistio))}),e.TgZ(1,"ion-card",15)(2,"ion-grid")(3,"ion-row")(4,"ion-col"),e.YNc(5,C,8,4,"div",16),e.YNc(6,v,8,4,"div",16),e.qZA()()()()()}if(2&s){const o=r.$implicit;e.xp6(5),e.Q6J("ngIf","M"==o.sexo),e.xp6(1),e.Q6J("ngIf","F"==o.sexo)}}function y(s,r){1&s&&(e.TgZ(0,"label",23),e._uU(1," No hay asistentes"),e.qZA())}const M=[{path:"",component:(()=>{var s;class r{constructor(t,i,a,n,g,f){this.servicio=t,this.activatedRoute=i,this.navCtrl=a,this.storage=n,this.navParams=g,this.alertCtrl=f,this.fechaClase=new Date,this.logo=p.us}ngOnInit(){this.idClase=this.activatedRoute.snapshot.paramMap.get("idClase"),this.nombre=this.activatedRoute.snapshot.paramMap.get("nombre"),this.profesor=this.activatedRoute.snapshot.paramMap.get("profesor"),this.fechaf=this.activatedRoute.snapshot.paramMap.get("fechaf"),this.profesorNombre=this.activatedRoute.snapshot.paramMap.get("profesorNombre"),this.descripcionHorario=this.activatedRoute.snapshot.paramMap.get("descripcionHorario"),console.log("El ID de la clase es :",this.idClase),console.log("fecha ngOnInit:"+this.fechaf),this.usuario=this.navParams.get(this.usuario),this.storage.get("DatosUsuario").then(t=>{this.usuario=t,console.log("Datos del usuario:",this.usuario),this.idrol=this.usuario.respuesta.idRol,this.idUser=this.usuario.respuesta.idUsuario,this.sociedad=this.usuario.respuesta.sociedad,console.log(this.idrol,"Rol de usuario en Menu"),console.log(this.idUser,"Id del usuario"),this.servicio.getData(p.T5+"AsistenciaClases/"+this.idClase+"?fecha="+this.fechaf+"&sociedad="+this.sociedad).subscribe(i=>{console.log(i,"ngOnInit"),this.listado=i;let a=JSON.stringify(i),n=JSON.parse(a);this.idUsuario=n.respuesta.usuarios.idUsuario,this.horaInicio=n.respuesta.clase.horaInicio,this.horaFin=n.respuesta.clase.horaFin,this.horario=n.respuesta.clase.horario,this.nombreC=n.respuesta.clase.nombre,this.personas=n.respuesta.clase.personas,this.estatus=n.respuesta.clase.estatus,this.fecha=n.respuesta.fecha,console.log("Hora inicio",this.horaInicio),console.log("Hora fin",this.horaFin)})})}ponerFalta(t,i,a,n){console.log("Poner falta",t),console.log("Lugar",a),console.log("IdClase",this.idClase),console.log("fecha",this.fecha),console.log("Asistio",n),"A"===n?this.presentAlertConfirm(i,t,a,this.idClase):this.quitarfalta(i,t,a,this.idClase)}presentAlertConfirm(t,i,a,n){var g=this;return(0,d.Z)(function*(){console.log("Seguro que desea agregar falta"),yield(yield g.alertCtrl.create({cssClass:"my-custom-class",message:t+" asistio a clase ?",buttons:[{text:"No",role:"cancel",cssClass:"secondary",handler:O=>{console.log("Falta agregada"),g.agregarquitarfalta(i,a,n,"I")}},{text:"Si",handler:()=>{console.log("Usuario no falto")}}]})).present()})()}agregarquitarfalta(t,i,a,n){this.servicio.agregarFalta(t,this.idUser,i,a,this.fecha,n).subscribe(g=>{console.log(g,"Falta agregada 2"),this.mensaje=g.descripcion,500==g.codigo?(this.deleteClase(),console.log("ID de usuario con nueva falta",t)):(this.deleteClase(),this.obtenerDatos())})}quitarfalta(t,i,a,n){var g=this;return(0,d.Z)(function*(){console.log("Quitar falta"),yield(yield g.alertCtrl.create({cssClass:"my-custom-class",message:" Deseas quitar su falta a "+t+" ?",buttons:[{text:"No",role:"cancel",cssClass:"secondary",handler:O=>{console.log("Falta eliminada")}},{text:"Si",handler:()=>{console.log("Usuario no falto"),g.agregarquitarfalta(i,a,n,"CFC")}}]})).present()})()}obtenerDatos(){this.servicio.getData(p.T5+"AsistenciaClases/"+this.idClase+"?fecha="+this.fechaf+"&sociedad="+this.sociedad).subscribe(t=>{console.log(t,"recargar"),this.listado=t;let i=JSON.stringify(t),a=JSON.parse(i);this.idUsuario=a.respuesta.usuarios.idUsuario,this.horaInicio=a.respuesta.clase.horaInicio,this.horaFin=a.respuesta.clase.horaFin,this.horario=a.respuesta.clase.horario,this.nombreC=a.respuesta.clase.nombre,this.personas=a.respuesta.clase.personas,this.estatus=a.respuesta.clase.estatus,this.fecha=a.respuesta.fecha,console.log("Hora inicio",this.horaInicio),console.log("Hora fin",this.horaFin)})}deleteClase(){var t=this;return(0,d.Z)(function*(){yield(yield t.alertCtrl.create({cssClass:"my-custom-class",message:t.mensaje,buttons:["OK"]})).present(),t.navCtrl.navigateRoot("/horariosadmin/"+t.fechaf+"/"+t.idUser+"/"+t.sociedad)})()}regresar(){this.navCtrl.navigateRoot("/horariosadmin/"+this.fechaf+"/"+this.idUser+"/"+this.sociedad+"/"+this.idrol)}}return(s=r).\u0275fac=function(t){return new(t||s)(e.Y36(x.r),e.Y36(h.gz),e.Y36(l.SH),e.Y36(_.K),e.Y36(l.X1),e.Y36(l.Br))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-asistentes"]],decls:23,vars:8,consts:[[1,"ion-no-border"],[1,"dorado"],["slot","start"],["defaultHref","","text","",1,"dorado",3,"click"],[3,"fullscreen"],[1,"logo",3,"src"],[2,"margin-bottom","10px","text-align","center","margin-top","10px"],[2,"font-size","15px"],[2,"font-size","14px"],[1,"color-coach",2,"font-size","12px","margin-bottom","5px"],[1,"label-g1"],[1,"animated","fast","fadeInDown"],["lines","none","color","gray","detail","false",3,"click",4,"ngFor","ngForOf"],["class","sinclases",4,"ngIf"],["lines","none","color","gray","detail","false",3,"click"],[2,"padding","2px"],[4,"ngIf"],[1,"label-lugaresm"],[2,"font-size","12px","margin-left","5px"],[1,"label-lugar"],["class","label-asistio",4,"ngIf"],[1,"label-asistio"],[1,"label-lugaresf"],[1,"sinclases"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),e._uU(3,"Asistentes"),e.qZA(),e.TgZ(4,"ion-buttons",2)(5,"ion-back-button",3),e.NdJ("click",function(){return i.regresar()}),e.qZA()()()(),e.TgZ(6,"ion-content",4),e._UZ(7,"ion-img",5),e.TgZ(8,"div",6)(9,"label",7),e._uU(10),e.qZA(),e._UZ(11,"br"),e.TgZ(12,"label",8),e._uU(13),e.qZA(),e._UZ(14,"br"),e.TgZ(15,"label",9),e._uU(16),e.qZA(),e._UZ(17,"br"),e.TgZ(18,"label",10),e._uU(19),e.qZA()(),e.TgZ(20,"ion-list",11),e.YNc(21,P,7,2,"ion-item",12),e.qZA(),e.YNc(22,y,2,0,"label",13),e.qZA()),2&t&&(e.xp6(6),e.Q6J("fullscreen",!0),e.xp6(1),e.MGl("src","../../assets/img/",i.logo,""),e.xp6(3),e.hij("Fecha: ",i.fechaf,""),e.xp6(3),e.hij(" ",i.descripcionHorario," "),e.xp6(3),e.hij(" Clase impartida por ",i.profesorNombre," "),e.xp6(3),e.hij(" ",null==i.listado?null:i.listado.respuesta.lugares," "),e.xp6(2),e.Q6J("ngForOf",null==i.listado?null:i.listado.respuesta.usuarios),e.xp6(1),e.Q6J("ngIf",0==(null==i.listado?null:i.listado.respuesta.usuarios.length)))},dependencies:[u.sg,u.O5,l.oU,l.Sm,l.PM,l.wI,l.W2,l.jY,l.Gu,l.Xz,l.Ie,l.q_,l.Nd,l.wd,l.sr,l.cs],styles:['@charset "UTF-8";h2[_ngcontent-%COMP%]{font-size:20px;text-align:center;padding:3px}h3[_ngcontent-%COMP%]{text-align:center;padding:3px}p[_ngcontent-%COMP%]{font-size:15px;text-align:center}ion-img[_ngcontent-%COMP%]{width:40%;display:block;margin:auto;padding-top:30px}span.pink[_ngcontent-%COMP%]{background:#ff0080;border-radius:.8em;-moz-border-radius:.8em;-webkit-border-radius:.8em;color:#fff;display:inline-block;font-weight:700;line-height:1.6em;margin-right:15px;text-align:center;width:1.6em}span.blue[_ngcontent-%COMP%]{background:#007dff;border-radius:.8em;-moz-border-radius:.8em;-webkit-border-radius:.8em;color:#fff;display:inline-block;font-weight:700;line-height:1.6em;margin-right:15px;text-align:center;width:1.6em}.ajuste[_ngcontent-%COMP%]{padding-left:1px}.label-lugares[_ngcontent-%COMP%]{background-color:#567419;color:#fff;border-radius:50%;width:24px;height:24px;display:inline-flex;align-items:center;justify-content:center;font-size:10px;font-weight:700;text-align:center;margin:2px}ion-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{width:95%;margin:8px}ion-item[_ngcontent-%COMP%]{--padding-start: 0}.label-lugaresm[_ngcontent-%COMP%]{background-color:#4990e2;color:#fff;border-radius:50%;width:24px;height:24px;display:inline-flex;align-items:center;justify-content:center;font-size:10px;font-weight:700;text-align:center;margin:2px}.label-lugaresf[_ngcontent-%COMP%]{background-color:#bd0fe1;color:#fff;border-radius:50%;width:24px;height:24px;display:inline-flex;align-items:center;justify-content:center;font-size:10px;font-weight:700;text-align:center;margin:2px}.label-asistio[_ngcontent-%COMP%]{background-color:#eea6a6;padding:2px 5px;margin-left:5px;color:#cb2e2e;border-radius:10px;font-size:10px;font-weight:700}.sinclases[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:200px;text-align:center;font-size:14px;color:#999;font-weight:500;width:100%}']}),r})()}];let U=(()=>{var s;class r{}return(s=r).\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[h.Bz.forChild(M),h.Bz]}),r})(),T=(()=>{var s;class r{}return(s=r).\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[u.ez,b.u5,l.Pc,U]}),r})()}}]);